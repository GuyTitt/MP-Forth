# début du "dictionnaire" version "10"
from memoire import mem

def align_here():
    pad = mem.here % 4
    if pad:
        mem.here += 4 - pad

def create(name, code_addr, immediate=False):
    # ← immediate=False par défaut → 2 ou 3 arguments acceptés
    align_here()
    mem.wpoke(mem.here, mem.latest)
    mem.here += 4
    flags = len(name) | (0x80 if immediate else 0)
    mem.cpoke(mem.here, flags)
    mem.here += 1
    for c in name.upper():
        mem.cpoke(mem.here, ord(c))
        mem.here += 1
    align_here()
    mem.wpoke(mem.here, code_addr)
    mem.here += 4
    mem.latest = mem.here - 4

def find(word):
    w = word.upper()
    addr = mem.latest
    while addr:
        link = mem.wpeek(addr)
        addr += 4
        fl = mem.ram[addr]
        length = fl & 0x7F
        addr += 1
        name = ''.join(chr(mem.ram[addr + i]) for i in range(length))
        addr += length
        addr += (4 - addr % 4) % 4
        if name == w:
            return addr, bool(fl & 0x80)
        addr = link
    return None, False

version = ('dictionnaire.py', 10)
# fin du "dictionnaire" version "10"